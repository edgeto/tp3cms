<extend name="Public:base" />
<block name="page-content">
	<div class="row" style="margin: 0 auto">
		<div class="col-sm-12">
			<div class="alert alert-block alert-success h">
				<button type="button" class="close" data-dismiss="alert">
					<i class="ace-icon fa fa-times"></i>
				</button>
				<p>
					<strong>
						<i class="ace-icon fa fa-check"></i>
						Well done！
					</strong>
					You successfully delete！
				</p>
			</div><!-- /.alert-success -->
			<div class="alert alert-warning h">
				<button type="button" class="close" data-dismiss="alert">
					<i class="ace-icon fa fa-times"></i>
				</button>
				<strong>Sorry！</strong>
				<span class="alert-warning-msg">Delete failed！</span>
				<br>
			</div>
			<div class="widget-box transparent">
				<div class="widget-header widget-header-flat">
					<h4 class="widget-title lighter">
						<i class="ace-icon fa fa-star orange"></i>
						资源列表 Resource List
					</h4>
					<div class="widget-toolbar">
						<a href="#" data-action="collapse">
							<i class="ace-icon fa fa-chevron-up"></i>
						</a>
					</div>
				</div>
				<!-- 搜索 -->
				<div class="widget-body">
					<div class="widget-main">
						<form class="form-inline" action="" method="get">
							<div class="form-group">
								<label class="control-label no-padding-right" for="name">名称：</label>
									<input type="text" id="name" name="name" placeholder="请输入名称" value="{$map['name']}" />
							</div>
							<div class="form-group">
								<label class="control-label no-padding-right" for="controller">控制器：</label>
									<input type="text" id="controller" name="controller" placeholder="请输入控制器" value="{$map['controller']}" />
							</div>
							<div class="form-group">
								<label class="control-label no-padding-right" for="action">动作：</label>
									<input type="text" id="action" name="action" placeholder="请输入动作" value="{$map['action']}" />
							</div>
							<div class="form-group">
								<label class="control-label no-padding-right" for="route">路由：</label>
									<input type="text" id="route" name="route" placeholder="请输入路由" value="{$map['route']}" />
							</div>
							<button class="submit-button" type="submit">
								<i class="ace-icon fa fa-search bigger-130"></i>
							</button>
							<a class="submit-button" href="{:U()}">
								<i class="glyphicon glyphicon-repeat"></i>
							</a>
						</form>
					</div>
				</div>
				<div class="widget-body">
					<div class="widget-header widget-header-flat text-right">
						<h4 class="widget-title lighter count-list">
							系统现有资源<b>{$count}</b>个
						</h4>
					</div>
					<div class="widget-main no-padding">
						<table class="table table-bordered table-striped table-hover text-center">
							<thead class="thin-border-bottom text-center">
								<tr>
									<th class="text-center">
										<label class="pos-rel">
											<input type="checkbox" class="ace" />
											<span class="lbl"></span>
										</label>
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>ID
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>名称
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>控制器
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>动作
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>路由
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>父资源
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>显示在导航
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>导航名称
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>导航显示排序
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>是否是权限频道
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>所属权限频道
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>添加时间
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>修改时间
									</th>
									<th class="text-center">
										<i class="ace-icon fa fa-caret-right blue"></i>操作
									</th>
								</tr>
							</thead>
							<tbody>
								<volist name="list" id="vo">
									<tr>
										<td>
											<label class="pos-rel">
												<input type="checkbox" class="ace" />
												<span class="lbl"></span>
											</label>
										</td>
										<td>{$vo['id']}</td>
										<td>
											{$vo['name']}
										</td>
										<td>{$vo['controller']}</td>
						                <td>{$vo['action']}</td>
						                <td>{$vo['route']}</td>
						                <td>{$vo['pid']|get_resource_name}</td>
						                <td>
						                	<if condition="$vo['show_nav'] eq 0 ">
						                        不显示
						                        <else />
						                        显示
						                    </if>
						                </td>
						                <td>{$vo['nav_name']}</td>
						                <td>{$vo['show_order']}</td>
						                <td>
											<if condition="$vo['is_role_channel'] eq 0 ">
						                        否
					                        <else />
						                        是
						                    </if>
						                </td>
						                <td>{$vo['role_channel_id']|get_resource_name}</td>
						                <td>
						                    {$vo['add_time']|date="Y-m-d H:i:s",###}
						                </td>
						                <td>
						                    {$vo['update_time']|date="Y-m-d H:i:s",###}
						                </td>
										<td>
											<div class="hidden-sm hidden-xs action-buttons">
												<a class="green" href="{:U('resource/edit', array('id' => $vo['id']))}">
													<i class="ace-icon fa fa-pencil bigger-130"></i>
												</a>
												<a class="red bootbox-confirm" href="javascript:;" value="{:U('resource/delete', array('id' => $vo['id']))}">
													<i class="ace-icon fa fa-trash-o bigger-130"></i>
												</a>
											</div>
										</td>
									</tr>
								</volist>
							</tbody>
						</table>
						<div class="page">
						    {$page}
						</div>
					</div><!-- /.widget-main -->
				</div><!-- /.widget-body -->
			</div><!-- /.widget-box -->
		</div><!-- /.col -->
	</div><!-- /.row -->
</block>
